pipeline {
    agent { label 'master' }
    stages {
        stage('Preload') {
            steps {
                script {
                    COMMIT_HASH = sh (
                    script: '''#!/bin/bash
                    git show | grep -i -m 1 commit | awk '{print $2}' 
                    ''',
                    returnStdout: true).trim()
                    BRANCH_NAME = sh (
                    script: '''#!/bin/bash
                    git show -s --pretty=%D HEAD | tr -s ',' '\n' | sed 's/^ //' | grep -v -e HEAD | sed 's:origin/::' 
                    ''',
                    returnStdout: true).trim()
                }
                echo "Commit hash: ${COMMIT_HASH}"
                echo "Branch name: ${BRANCH_NAME}"
                echo "Branch name(env): ${env.BRANCH_NAME}"
                echo "Change branch(env): ${env.CHANGE_BRANCH}"
                echo "Change ID: ${env.CHANGE_ID}"
            }
        }
        
        stage('Pre-Deployment') {
            steps {
                echo "This is the Pre-Deployment Stage"
            }
        }
        
        stage('Deployment') {
            steps {
                echo "This is the Deployment Stage"
            }
        }
        
        stage('Configuration') {
            steps {
                echo "This is the Configuration Stage"
            }
        }
        
        stage('Post-Deployment') {
            steps {
                echo "This is the Pre-Deployment Stage"
            }
        }
    }
}
