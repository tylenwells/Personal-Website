pipeline {
    agent { label 'master' }
    stages {
        stage('Preload') {
            steps {
                script {
                    COMMIT_HASH = sh (
                    script: '''#!/bin/bash
                    git show | grep -i -m 1 commit | awk '{print $2}' 
                    ''',
                    returnStdout: true).trim()
                }
                echo "Commit hash: ${COMMIT_HASH}"
                echo "Branch name: ${env.BRANCH_NAME}"
                echo "Change ID: ${env.CHANGE_ID}"
            }
        }
        stage('var test') {
            steps {
                echo "Commit hash: ${COMMIT_HASH}"
            }
        }
    }
}
